# frozen_string_literal: true

load_environment_file "#{site_directory}/.env"

FRONTEND_ENVIRONMENTS = %W[
  ENVIRONMENT=production
  API_URL=#{ENV['API_URL']}
  SENTRY_DSN=#{ENV['SENTRY_DSN']}
].freeze

in_directory(args[:project_path]) do
  in_directory('frontend') do
    build_swo_image('better_izivi_develop_frontend', FRONTEND_ENVIRONMENTS)
  end

  in_directory('api') do
    build_swo_image('better_izivi_develop_api', nil, network: 'traefik')
  end
end
